<!-- door_fuse.html file -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DOORFUSE ‚Äî Why Counting Bus Passengers Is Harder Than You Think</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #06090f;
  --surface: #0d1320;
  --surface-raised: #111c2e;
  --border: #1a2640;
  --border-glow: #243352;
  --text: #e4eaf2;
  --text-dim: #a0b4cc;
  --text-muted: #5e7a9a;
  --accent: #38bdf8;
  --accent-glow: rgba(56, 189, 248, 0.08);
  --violet: #a78bfa;
  --green: #34d399;
  --green-glow: rgba(52, 211, 153, 0.08);
  --red: #f87171;
  --red-glow: rgba(248, 113, 113, 0.06);
  --orange: #fb923c;
  --orange-glow: rgba(251, 146, 60, 0.08);
  --pink: #f472b6;
  --yellow: #fbbf24;
  --cyan: #22d3ee;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  overflow-x: hidden;
  line-height: 1.75;
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}

/* ‚îÄ‚îÄ‚îÄ STICKY NAV ‚îÄ‚îÄ‚îÄ */
.stage-nav {
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  justify-content: center;
  gap: 3px;
  padding: 14px 12px 12px;
  background: rgba(6, 9, 15, 0.82);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.stage-btn {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.82rem;
  font-weight: 700;
  padding: 9px 16px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-muted);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  white-space: nowrap;
}
.stage-btn:hover { border-color: var(--accent); color: var(--text-dim); }
.stage-btn.active {
  background: var(--accent-glow);
  border-color: var(--accent);
  color: var(--accent);
  box-shadow: 0 0 20px rgba(56,189,248,0.08);
}

.container { max-width: 820px; margin: 0 auto; padding: 0 28px; }
.section-anchor {
  scroll-margin-top: 80px;
  height: 2px;
  display: block;
  visibility: hidden;
}

/* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
.hero {
  min-height: 92vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  position: relative;
  padding: 60px 28px;
}
.hero::before {
  content: '';
  position: absolute;
  top: -20%;
  left: 50%;
  transform: translateX(-50%);
  width: 900px;
  height: 900px;
  background: radial-gradient(circle, rgba(56,189,248,0.04) 0%, rgba(167,139,250,0.02) 40%, transparent 70%);
  pointer-events: none;
}
.hero::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0; right: 0;
  height: 200px;
  background: linear-gradient(transparent, var(--bg));
  pointer-events: none;
}

.badge {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.68rem;
  font-weight: 600;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  padding: 6px 16px;
  border: 1px solid var(--border-glow);
  border-radius: 20px;
  color: var(--text-muted);
  margin-bottom: 36px;
  background: var(--surface);
}

.hero h1 {
  font-family: 'JetBrains Mono', monospace;
  font-size: clamp(2.8rem, 6vw, 4.5rem);
  font-weight: 700;
  letter-spacing: -3px;
  line-height: 1;
  margin-bottom: 28px;
}
.word-door {
  background: linear-gradient(135deg, var(--accent) 0%, var(--cyan) 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.word-fuse {
  background: linear-gradient(135deg, var(--violet) 0%, var(--pink) 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.hero-tagline {
  font-size: 1.3rem;
  color: var(--text-dim);
  max-width: 540px;
  line-height: 1.7;
  margin-bottom: 48px;
}
.hero-tagline em {
  color: var(--text);
  font-style: normal;
  font-weight: 500;
}

.hero-number {
  display: flex;
  align-items: baseline;
  gap: 14px;
  margin-bottom: 56px;
}
.hero-number .big {
  font-family: 'JetBrains Mono', monospace;
  font-size: 4.5rem;
  font-weight: 700;
  color: var(--green);
  line-height: 1;
  letter-spacing: -3px;
}
.hero-number .context {
  font-size: 1.05rem;
  color: var(--text-muted);
  line-height: 1.5;
  text-align: left;
}
.hero-number .context strong { color: var(--text-dim); }

.scroll-hint {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  animation: float 2.5s ease-in-out infinite;
}
.scroll-hint span {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.68rem;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--text-muted);
}
.scroll-arrow {
  width: 16px; height: 16px;
  border-right: 1.5px solid var(--text-muted);
  border-bottom: 1.5px solid var(--text-muted);
  transform: rotate(45deg);
}
@keyframes float {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(8px); }
}

/* ‚îÄ‚îÄ‚îÄ SECTIONS ‚îÄ‚îÄ‚îÄ */
.section-break { padding: 100px 0 50px; }
.section-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: clamp(1.4rem, 2.8vw, 1.8rem);
  font-weight: 700;
  letter-spacing: -0.5px;
  margin-bottom: 14px;
}
.section-headline {
  font-size: clamp(1.05rem, 2vw, 1.25rem);
  font-weight: 400;
  line-height: 1.55;
  color: var(--text-dim);
  max-width: 600px;
}

/* ‚îÄ‚îÄ‚îÄ SVG SCENE ‚îÄ‚îÄ‚îÄ */
.scene {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  margin: 40px 0;
}
.doorway-visual {
  width: 100%;
  height: 420px;
  background: linear-gradient(180deg, #0a1018, #0d1824);
  overflow: hidden;
}
.doorway-visual svg { width: 100%; height: 100%; }
.scene-caption {
  padding: 20px 24px;
  border-top: 1px solid var(--border);
}
.scene-caption p { font-size: 0.95rem; color: var(--text-dim); line-height: 1.65; }
.scene-caption .hl-red { color: var(--red); font-weight: 500; }
.scene-caption .hl-green { color: var(--green); font-weight: 500; }

@keyframes pulse-zone {
  0%, 100% { opacity: 0.12; }
  50% { opacity: 0.3; }
}
.pulse-zone { animation: pulse-zone 2.5s ease-in-out infinite; }

/* ‚îÄ‚îÄ‚îÄ FAILURE ROWS ‚îÄ‚îÄ‚îÄ */
.failures {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin: 32px 0 60px;
}
.failure-row {
  display: flex;
  align-items: stretch;
  background: var(--surface);
  border: 1px solid var(--border);
  overflow: hidden;
  transition: border-color 0.3s;
}
.failure-row:first-child { border-radius: 14px 14px 0 0; }
.failure-row:last-child { border-radius: 0 0 14px 14px; }
.failure-row:hover { border-color: var(--border-glow); }
.failure-ind { width: 4px; flex-shrink: 0; }
.failure-body { padding: 22px 24px; flex: 1; }
.failure-title {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.92rem;
  font-weight: 600;
  margin-bottom: 6px;
}
.failure-desc { font-size: 0.95rem; color: var(--text-dim); line-height: 1.7; }
.failure-impact {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 4px;
  margin-top: 10px;
  display: inline-block;
}

/* ‚îÄ‚îÄ‚îÄ EQUATION ‚îÄ‚îÄ‚îÄ */
.equation-strip {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 28px 32px;
  text-align: center;
  margin: 24px 0;
  position: relative;
  overflow: hidden;
}
.equation-strip::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent), var(--violet), var(--pink), var(--orange), var(--green));
}
.equation {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.2rem;
  font-weight: 600;
  letter-spacing: 1.5px;
}
.eq-fn { color: var(--accent); }
.eq-sum { color: var(--violet); }
.eq-w { color: var(--orange); }
.eq-s { color: var(--green); }

/* ‚îÄ‚îÄ‚îÄ SIGNAL STRIP ‚îÄ‚îÄ‚îÄ */
.signal-strip {
  display: flex;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid var(--border);
  height: 140px;
  margin: 24px 0;
}
.signal-seg {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px 8px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  position: relative;
  transition: all 0.4s;
  cursor: default;
  overflow: hidden;
}
.signal-seg:last-child { border-right: none; }
.signal-seg::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.4s;
}
.signal-seg:hover::before { opacity: 1; }
.signal-seg:nth-child(1)::before { background: linear-gradient(180deg, rgba(56,189,248,0.06), transparent 60%); }
.signal-seg:nth-child(2)::before { background: linear-gradient(180deg, rgba(167,139,250,0.06), transparent 60%); }
.signal-seg:nth-child(3)::before { background: linear-gradient(180deg, rgba(244,114,182,0.06), transparent 60%); }
.signal-seg:nth-child(4)::before { background: linear-gradient(180deg, rgba(251,146,60,0.06), transparent 60%); }
.signal-seg:nth-child(5)::before { background: linear-gradient(180deg, rgba(52,211,153,0.06), transparent 60%); }
.sig-icon { font-size: 1.8rem; margin-bottom: 10px; position: relative; z-index: 1; }
.sig-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  position: relative;
  z-index: 1;
  text-align: center;
  line-height: 1.4;
}

/* ‚îÄ‚îÄ‚îÄ PIPE STEPS ‚îÄ‚îÄ‚îÄ */
.pipe-steps {
  display: flex;
  position: relative;
  margin: 40px 0;
}
.pipe-steps::before {
  content: '';
  position: absolute;
  top: 28px;
  left: 40px; right: 40px;
  height: 1px;
  background: linear-gradient(90deg, var(--cyan), var(--accent), var(--green), var(--violet), var(--pink));
  opacity: 0.3;
}
.pipe-step {
  flex: 1;
  text-align: center;
  padding: 0 6px;
  position: relative;
}
.pipe-dot {
  width: 18px; height: 18px;
  border-radius: 50%;
  margin: 0 auto 14px;
  position: relative;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
}
.pipe-dot::before {
  content: '';
  width: 8px; height: 8px;
  border-radius: 50%;
  background: currentColor;
}
.pipe-dot::after {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  background: currentColor;
  opacity: 0.15;
}
.pipe-name {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  margin-bottom: 4px;
}
.pipe-detail {
  font-size: 0.82rem;
  color: var(--text-muted);
  line-height: 1.4;
}

/* ‚îÄ‚îÄ‚îÄ COMPARISON ‚îÄ‚îÄ‚îÄ */
.compare-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3px;
  border-radius: 14px;
  overflow: hidden;
  margin: 40px 0;
}
.compare-side {
  padding: 36px 28px;
  text-align: center;
  position: relative;
}
.compare-side.before { background: linear-gradient(135deg, rgba(248,113,113,0.04), var(--surface) 60%); }
.compare-side.after  { background: linear-gradient(135deg, rgba(52,211,153,0.04), var(--surface) 60%); }
.compare-tag {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.68rem;
  font-weight: 600;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  margin-bottom: 16px;
}
.compare-num {
  font-family: 'JetBrains Mono', monospace;
  font-size: 3.5rem;
  font-weight: 700;
  line-height: 1;
  margin-bottom: 6px;
  letter-spacing: -2px;
}
.compare-unit {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--text-muted);
}
.compare-detail {
  font-size: 0.92rem;
  color: var(--text-muted);
  margin-top: 14px;
  line-height: 1.5;
}
.compare-arrow {
  position: absolute;
  top: 50%; right: -14px;
  transform: translateY(-50%);
  width: 28px; height: 28px;
  background: var(--bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  font-size: 0.9rem;
  color: var(--text-muted);
}

/* ‚îÄ‚îÄ‚îÄ CITIES ‚îÄ‚îÄ‚îÄ */
.cities {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin: 40px 0;
}
.city {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 28px 24px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s;
}
.city:hover { border-color: var(--border-glow); }
.city::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
}
.city:first-child::before { background: linear-gradient(90deg, #000 33%, #b22234 33% 66%, #009e49 66%); }
.city:last-child::before  { background: linear-gradient(90deg, #00a1de 33%, #fad201 33% 66%, #20603d 66%); }
.city-name {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: -0.5px;
  margin-bottom: 4px;
}
.city-sub {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  color: var(--text-muted);
  letter-spacing: 1.5px;
  text-transform: uppercase;
  margin-bottom: 18px;
}
.city-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 8px 0;
  border-top: 1px solid rgba(26,38,64,0.5);
}
.city-row-label { font-size: 0.92rem; color: var(--text-dim); }
.city-row-val {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.95rem;
  font-weight: 600;
}

/* ‚îÄ‚îÄ‚îÄ CTA ‚îÄ‚îÄ‚îÄ */
.cta-section {
  text-align: center;
  padding: 80px 28px 60px;
  position: relative;
}
.cta-section::before {
  content: '';
  position: absolute;
  top: 0; left: 50%;
  transform: translateX(-50%);
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(56,189,248,0.03), transparent 60%);
  pointer-events: none;
}
.cta-headline {
  font-family: 'JetBrains Mono', monospace;
  font-size: clamp(1.3rem, 2.8vw, 1.8rem);
  font-weight: 700;
  letter-spacing: -0.5px;
  margin-bottom: 16px;
  line-height: 1.3;
}
.cta-sub {
  font-size: 1.05rem;
  color: var(--text-dim);
  max-width: 480px;
  margin: 0 auto 36px;
  line-height: 1.7;
}
.cta-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  padding: 14px 32px;
  border: 1px solid var(--accent);
  background: var(--accent-glow);
  color: var(--accent);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  text-decoration: none;
}
.cta-btn:hover {
  background: rgba(56,189,248,0.15);
  box-shadow: 0 0 30px rgba(56,189,248,0.1);
  transform: translateY(-2px);
}
.cta-details {
  margin-top: 40px;
  display: flex;
  justify-content: center;
  gap: 40px;
  flex-wrap: wrap;
}
.cta-det { text-align: center; }
.cta-det-val {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text);
}
.cta-det-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.68rem;
  color: var(--text-muted);
  letter-spacing: 1.5px;
  text-transform: uppercase;
  margin-top: 2px;
}

/* ‚îÄ‚îÄ‚îÄ NEXT PROJECT ‚îÄ‚îÄ‚îÄ */
.next-project {
  border-top: 1px solid var(--border);
  padding: 50px 28px;
  max-width: 820px;
  margin: 0 auto;
}
.next-project-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 16px;
}
.next-project-card {
  display: block;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 32px 28px;
  text-decoration: none;
  color: inherit;
  transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}
.next-project-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: var(--violet);
}
.next-project-card:hover {
  border-color: rgba(167, 139, 250, 0.3);
  transform: translateY(-3px);
  background: var(--surface-raised);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}
.next-project-card h3 {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
  letter-spacing: -0.3px;
}
.next-project-card p {
  color: var(--text-dim);
  font-size: 1.05rem;
  line-height: 1.7;
  margin-bottom: 14px;
}
.next-project-tag {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--violet);
}

/* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
.footer {
  text-align: center;
  padding: 32px 28px;
  border-top: 1px solid var(--border);
}
.footer p {
  font-size: 0.78rem;
  color: var(--text-muted);
  font-family: 'JetBrains Mono', monospace;
}

/* ‚îÄ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ‚îÄ */
.reveal {
  opacity: 1;
  transform: none;
  transition: opacity 0.8s ease, transform 0.8s ease;
}
.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}
.reveal-d1 { transition-delay: 0.1s; }
.reveal-d2 { transition-delay: 0.2s; }

/* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
@media (max-width: 640px) {
  .hero h1 { letter-spacing: -2px; }
  .hero-number { flex-direction: column; align-items: center; gap: 8px; }
  .hero-number .context { text-align: center; }
  .compare-grid { grid-template-columns: 1fr; }
  .compare-arrow { display: none; }
  .cities { grid-template-columns: 1fr; }
  .signal-strip { flex-direction: column; height: auto; }
  .signal-seg { padding: 16px; flex-direction: row; gap: 14px; justify-content: flex-start; border-right: none; border-bottom: 1px solid var(--border); }
  .signal-seg:last-child { border-bottom: none; }
  .pipe-steps { flex-direction: column; gap: 16px; }
  .pipe-steps::before { display: none; }
  .stage-btn { padding: 6px 12px; font-size: 0.7rem; }
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê STICKY NAV ‚ïê‚ïê‚ïê -->
<nav class="stage-nav">
  <button class="stage-btn" onclick="window.location.href='index.html'">‚Üê HOME</button>
  <button class="stage-btn active" onclick="goToSection('hero')">OVERVIEW</button>
  <button class="stage-btn" onclick="goToSection('problem')">PROBLEM</button>
  <button class="stage-btn" onclick="goToSection('idea')">IDEA</button>
  <button class="stage-btn" onclick="goToSection('approach')">APPROACH</button>
  <button class="stage-btn" onclick="goToSection('results')">RESULTS</button>
  <button class="stage-btn" onclick="goToSection('paper')">FULL PAPER</button>
</nav>

<!-- ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê -->
<div class="section-anchor" id="hero"></div>

<div class="hero">
  <div class="badge">UNDER REVIEW</div>
  <h1><span class="word-door">DOOR</span><span class="word-fuse">FUSE</span></h1>
  <p class="hero-tagline">
    Every transit agency wants to know how many people get on and off their buses. Sounds simple. <em>It isn't.</em>
  </p>
  <div class="hero-number">
    <span class="big">82%</span>
    <span class="context">fewer counting errors<br><strong>vs. state-of-art tracking</strong></span>
  </div>

  <div class="scroll-hint" onclick="goToSection('problem')" style="cursor: pointer;">
    <span>The problem</span>
    <div class="scroll-arrow"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê 02 ‚Äî PROBLEM ‚ïê‚ïê‚ïê -->
<div class="container">
  <div class="section-anchor" id="problem"></div>
  <div class="section-break reveal">
    <h2 class="section-label" style="color: var(--red);">02 ‚Äî The Problem</h2>
    <h3 class="section-headline">The doorway is a <span style="color: var(--red);">chaos zone.</span></h3>
  </div>

  <div class="scene reveal reveal-d1">
    <div class="doorway-visual">
      <svg viewBox="0 0 820 420" xmlns="http://www.w3.org/2000/svg" fill="none">
        <rect x="0" y="0" width="820" height="420" fill="#0a1018"/>
        <rect x="0" y="40" width="340" height="340" rx="4" fill="#0e1520" stroke="#1a2640"/>
        <text x="170" y="210" text-anchor="middle" fill="#5e7a9a" font-family="JetBrains Mono" font-size="11" letter-spacing="2">BUS INTERIOR</text>
        <rect x="480" y="40" width="340" height="340" rx="4" fill="#0c1218" stroke="#1a2640"/>
        <text x="650" y="210" text-anchor="middle" fill="#5e7a9a" font-family="JetBrains Mono" font-size="11" letter-spacing="2">PLATFORM</text>
        <rect x="340" y="40" width="140" height="340" fill="#1a0a0a"/>
        <rect x="340" y="40" width="140" height="340" fill="#f8717118" class="pulse-zone"/>
        <rect x="340" y="40" width="1" height="340" stroke="#f87171" stroke-dasharray="4 6" opacity="0.4"/>
        <rect x="480" y="40" width="1" height="340" stroke="#f87171" stroke-dasharray="4 6" opacity="0.4"/>
        <text x="410" y="28" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="9" font-weight="600" letter-spacing="2.5" opacity="0.7">DOOR ZONE</text>
        <line x1="410" y1="40" x2="410" y2="380" stroke="#f87171" stroke-width="1.5" stroke-dasharray="6 4" opacity="0.5"/>
        <text x="410" y="398" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="8" opacity="0.5" letter-spacing="1">COUNTING LINE</text>
        <circle cx="390" cy="120" r="14" fill="#34d39930" stroke="#34d399" stroke-width="1.5"/>
        <text x="390" y="124" text-anchor="middle" fill="#34d399" font-family="JetBrains Mono" font-size="10" font-weight="600">P1</text>
        <path d="M520 120 L390 120" stroke="#34d399" stroke-width="1" stroke-dasharray="3 3" opacity="0.4"/>
        <polygon points="395,116 385,120 395,124" fill="#34d39960"/>
        <circle cx="430" cy="180" r="14" fill="#f8717130" stroke="#f87171" stroke-width="1.5"/>
        <text x="430" y="184" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="10" font-weight="600">P2</text>
        <path d="M430 200 L420 210 L440 220 L425 230" stroke="#f87171" stroke-width="1" stroke-dasharray="2 2" opacity="0.5"/>
        <rect x="442" y="170" width="55" height="16" rx="3" fill="#f8717120" stroke="#f87171" stroke-width="0.5" opacity="0.7"/>
        <text x="469" y="181" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="7" font-weight="600">FALSE +</text>
        <circle cx="380" cy="260" r="14" fill="#fb923c30" stroke="#fb923c" stroke-width="1.5"/>
        <text x="380" y="264" text-anchor="middle" fill="#fb923c" font-family="JetBrains Mono" font-size="10" font-weight="600">P3</text>
        <circle cx="370" cy="260" r="10" fill="none" stroke="#fb923c" stroke-dasharray="2 2" opacity="0.4"/>
        <text x="350" y="250" fill="#fb923c" font-family="JetBrains Mono" font-size="6" opacity="0.6">ID: 17</text>
        <text x="402" y="250" fill="#fb923c" font-family="JetBrains Mono" font-size="6" opacity="0.6">ID: 31</text>
        <rect x="346" y="278" width="68" height="16" rx="3" fill="#fb923c20" stroke="#fb923c" stroke-width="0.5" opacity="0.7"/>
        <text x="380" y="289" text-anchor="middle" fill="#fb923c" font-family="JetBrains Mono" font-size="7" font-weight="600">DOUBLE CT</text>
        <circle cx="410" cy="330" r="14" fill="#a0b4cc20" stroke="#a0b4cc" stroke-dasharray="3 3"/>
        <text x="410" y="334" text-anchor="middle" fill="#a0b4cc" font-family="JetBrains Mono" font-size="10" font-weight="600">P4</text>
        <circle cx="420" cy="320" r="16" fill="#1a264090" stroke="#5e7a9a"/>
        <rect x="384" y="348" width="52" height="16" rx="3" fill="#5e7a9a20" stroke="#5e7a9a" stroke-width="0.5" opacity="0.7"/>
        <text x="410" y="359" text-anchor="middle" fill="#a0b4cc" font-family="JetBrains Mono" font-size="7" font-weight="600">MISSED</text>
        <circle cx="400" cy="80" r="12" fill="#fbbf2430" stroke="#fbbf24" stroke-width="1.5"/>
        <text x="400" y="84" text-anchor="middle" fill="#fbbf24" font-family="JetBrains Mono" font-size="9" font-weight="600">S</text>
        <rect x="418" y="72" width="42" height="16" rx="3" fill="#fbbf2420" stroke="#fbbf24" stroke-width="0.5" opacity="0.7"/>
        <text x="439" y="83" text-anchor="middle" fill="#fbbf24" font-family="JetBrains Mono" font-size="7" font-weight="600">STAFF</text>
        <rect x="20" y="360" width="140" height="42" rx="8" fill="#f8717110" stroke="#f87171" opacity="0.8"/>
        <text x="90" y="376" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="8" letter-spacing="1.5" font-weight="600">NAIVE COUNT</text>
        <text x="90" y="394" text-anchor="middle" fill="#f87171" font-family="JetBrains Mono" font-size="14" font-weight="700">IN: 4  OUT: 1</text>
        <rect x="660" y="360" width="140" height="42" rx="8" fill="#34d39910" stroke="#34d399" opacity="0.8"/>
        <text x="730" y="376" text-anchor="middle" fill="#34d399" font-family="JetBrains Mono" font-size="8" letter-spacing="1.5" font-weight="600">GROUND TRUTH</text>
        <text x="730" y="394" text-anchor="middle" fill="#34d399" font-family="JetBrains Mono" font-size="14" font-weight="700">IN: 2  OUT: 0</text>
      </svg>
    </div>
    <div class="scene-caption">
      <p>A single stop on a Nairobi bus. The naive tracker reports <span class="hl-red">IN: 4, OUT: 1</span>. The truth is <span class="hl-green">IN: 2, OUT: 0</span>. Every failure mode is present at once ‚Äî a queuing passenger triggers a false crossing, a track break causes a double count, an occluded person is missed, and a staff member is counted as boarding.</p>
    </div>
  </div>

  <div class="failures reveal">
    <div class="failure-row">
      <div class="failure-ind" style="background: var(--red);"></div>
      <div class="failure-body">
        <div class="failure-title" style="color: var(--red);">Closed-Door False Positives</div>
        <div class="failure-desc">People queuing near the threshold while doors are shut. Their movement intersects the counting region ‚Äî producing crossings that never happened.</div>
        <div class="failure-impact" style="background: var(--red-glow); color: var(--red);">+40‚Äì60% overcount on busy routes</div>
      </div>
    </div>
    <div class="failure-row">
      <div class="failure-ind" style="background: var(--orange);"></div>
      <div class="failure-body">
        <div class="failure-title" style="color: var(--orange);">ID Fragmentation</div>
        <div class="failure-desc">Occlusion at door steps breaks tracks. One person exits, gets lost behind a pillar, reappears as a new identity. The counter sees two where there was one.</div>
        <div class="failure-impact" style="background: var(--orange-glow); color: var(--orange);">Up to 2√ó inflation during rush hour</div>
      </div>
    </div>
    <div class="failure-row">
      <div class="failure-ind" style="background: var(--yellow);"></div>
      <div class="failure-body">
        <div class="failure-title" style="color: var(--yellow);">Non-Passenger Contamination</div>
        <div class="failure-desc">Conductors, touts, and vendors move through the door zone repeatedly ‚Äî each crossing a potential phantom passenger.</div>
        <div class="failure-impact" style="background: rgba(251,191,36,0.08); color: var(--yellow);">+99 signed error on Kenya data alone</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê 03 ‚Äî IDEA ‚ïê‚ïê‚ïê -->
  <div class="section-anchor" id="idea"></div>
  <div class="section-break reveal">
    <h2 class="section-label" style="color: var(--violet);">03 ‚Äî The Idea</h2>
    <h3 class="section-headline">A single signal can't resolve the doorway. <span style="color: var(--violet);">Five can.</span></h3>
  </div>

  <p class="reveal" style="color: var(--text-dim); font-size: 1.05rem; max-width: 600px; margin-bottom: 36px;">
    Each crossing event is scored across five independent signals. When one degrades ‚Äî as pose estimation does under heavy crowding ‚Äî the others compensate.
  </p>

  <div class="equation-strip reveal">
    <div class="equation">
      <span class="eq-fn">Score(e)</span> = <span class="eq-sum">Œ£</span> <span class="eq-w">w·µ¢</span> ¬∑ <span class="eq-s">s·µ¢(e)</span>
    </div>
  </div>

  <div class="signal-strip reveal">
    <div class="signal-seg">
      <div class="sig-icon">‚Üó</div>
      <div class="sig-label" style="color: var(--accent);">Trajectory</div>
    </div>
    <div class="signal-seg">
      <div class="sig-icon">üß≠</div>
      <div class="sig-label" style="color: var(--violet);">Orientation</div>
    </div>
    <div class="signal-seg">
      <div class="sig-icon">üë§</div>
      <div class="sig-label" style="color: var(--pink);">Biometric</div>
    </div>
    <div class="signal-seg">
      <div class="sig-icon">‚ö°</div>
      <div class="sig-label" style="color: var(--orange);">Motion</div>
    </div>
    <div class="signal-seg">
      <div class="sig-icon">üìè</div>
      <div class="sig-label" style="color: var(--green);">Consistency</div>
    </div>
  </div>

  <p class="reveal" style="color: var(--text-muted); font-size: 0.95rem; text-align: center; font-style: italic; margin-bottom: 20px;">
    Weights shift automatically under crowding. When shoulders are hidden, trajectory takes over.
  </p>

  <!-- ‚ïê‚ïê‚ïê 04 ‚Äî APPROACH ‚ïê‚ïê‚ïê -->
  <div class="section-anchor" id="approach"></div>
  <div class="section-break reveal">
    <h2 class="section-label" style="color: var(--accent);">04 ‚Äî The Approach</h2>
    <h3 class="section-headline">Five stages. Raw CCTV in, <span style="color: var(--accent);">stop-level counts out.</span></h3>
  </div>

  <div class="reveal">
    <div class="pipe-steps">
      <div class="pipe-step">
        <div class="pipe-dot" style="color: var(--cyan);"></div>
        <div class="pipe-name" style="color: var(--cyan);">Sync</div>
        <div class="pipe-detail">OCR timestamps align video to GPS stops</div>
      </div>
      <div class="pipe-step">
        <div class="pipe-dot" style="color: var(--accent);"></div>
        <div class="pipe-name" style="color: var(--accent);">Track</div>
        <div class="pipe-detail">Dual-detector + ghost injection for occlusion</div>
      </div>
      <div class="pipe-step">
        <div class="pipe-dot" style="color: var(--green);"></div>
        <div class="pipe-name" style="color: var(--green);">Gate</div>
        <div class="pipe-detail">Door-state classifier suppresses closed-door noise</div>
      </div>
      <div class="pipe-step">
        <div class="pipe-dot" style="color: var(--violet);"></div>
        <div class="pipe-name" style="color: var(--violet);">Fuse</div>
        <div class="pipe-detail">5-signal scoring with crowd-adaptive weights</div>
      </div>
      <div class="pipe-step">
        <div class="pipe-dot" style="color: var(--pink);"></div>
        <div class="pipe-name" style="color: var(--pink);">Count</div>
        <div class="pipe-detail">Stop aggregation ‚Äî official + informal stops</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê PIPELINE DIAGRAM (dark themed) ‚ïê‚ïê‚ïê -->
  <div class="scene reveal reveal-d1" style="margin-top: 32px;">
    <div style="padding: 32px 20px 24px; background: linear-gradient(180deg, #0a1018, #0d1824);">
      <svg viewBox="0 0 760 440" xmlns="http://www.w3.org/2000/svg" fill="none" style="width:100%; height:auto;">
        <defs>
          <marker id="arr" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
            <polygon points="0 0, 7 2.5, 0 5" fill="#5e7a9a"/>
          </marker>
          <marker id="arr-red" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
            <polygon points="0 0, 7 2.5, 0 5" fill="#f87171"/>
          </marker>
          <marker id="arr-olive" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
            <polygon points="0 0, 7 2.5, 0 5" fill="#fbbf24"/>
          </marker>
          <linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#38bdf8"/>
            <stop offset="25%" stop-color="#a78bfa"/>
            <stop offset="50%" stop-color="#f472b6"/>
            <stop offset="75%" stop-color="#fb923c"/>
            <stop offset="100%" stop-color="#34d399"/>
          </linearGradient>
        </defs>

        <!-- ROW 1 ‚Äî Detection Backbone -->
        <rect x="12" y="52" width="64" height="46" rx="5" fill="#111c2e" stroke="#243352" stroke-width="1.2"/>
        <text x="44" y="70" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11.5" font-weight="600" fill="#e4eaf2">Frame</text>
        <text x="44" y="87" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="13" font-weight="700" font-style="italic" fill="#a0b4cc">I<tspan baseline-shift="sub" font-size="9.5">t</tspan></text>

        <rect x="120" y="14" width="76" height="34" rx="5" fill="#0f3460" stroke="#22d3ee" stroke-width="1" opacity="0.9"/>
        <text x="158" y="29" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#22d3ee">Body</text>
        <text x="158" y="43" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#22d3ee" opacity="0.7">YOLO</text>

        <rect x="120" y="58" width="76" height="34" rx="5" fill="#0f3460" stroke="#a78bfa" stroke-width="1" opacity="0.9"/>
        <text x="158" y="73" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#a78bfa">Pose</text>
        <text x="158" y="87" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#a78bfa" opacity="0.7">YOLO</text>

        <rect x="120" y="102" width="76" height="34" rx="5" fill="#0f3460" stroke="#f472b6" stroke-width="1" opacity="0.9"/>
        <text x="158" y="117" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#f472b6">Head</text>
        <text x="158" y="131" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#f472b6" opacity="0.7">YOLO</text>

        <rect x="242" y="42" width="92" height="52" rx="5" fill="#111c2e" stroke="#38bdf8" stroke-width="1.2"/>
        <text x="288" y="61" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#38bdf8">Ghost</text>
        <text x="288" y="76" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" fill="#38bdf8">Injection</text>
        <text x="288" y="89" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#5e7a9a" font-style="italic">Hungarian</text>

        <rect x="378" y="46" width="92" height="44" rx="5" fill="#111c2e" stroke="#38bdf8" stroke-width="1.2"/>
        <text x="424" y="64" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#38bdf8">BoTSORT</text>
        <text x="424" y="80" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" fill="#38bdf8" opacity="0.7">+ ReID</text>

        <!-- Ablation tags -->
        <rect x="144" y="48" width="28" height="17" rx="4" fill="#f8717120"/>
        <text x="158" y="60" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="700" fill="#f87171">A4</text>
        <rect x="274" y="28" width="28" height="17" rx="4" fill="#f8717120"/>
        <text x="288" y="40" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="700" fill="#f87171">A5</text>

        <!-- Row 1 arrows -->
        <line x1="76" y1="75" x2="95" y2="75" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="95" y1="31" x2="95" y2="119" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="95" y1="31" x2="120" y2="31" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="95" y1="75" x2="120" y2="75" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="95" y1="119" x2="120" y2="119" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="196" y1="31" x2="218" y2="31" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="218" y1="31" x2="218" y2="58" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="218" y1="58" x2="242" y2="58" stroke="#5e7a9a" stroke-width="1" marker-end="url(#arr)"/>
        <line x1="196" y1="119" x2="218" y2="119" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="218" y1="119" x2="218" y2="80" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="218" y1="80" x2="242" y2="80" stroke="#5e7a9a" stroke-width="1" marker-end="url(#arr)"/>
        <line x1="334" y1="68" x2="378" y2="68" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>

        <!-- ROW 2 ‚Äî Gating Pipeline (green themed) -->
        <rect x="12" y="172" width="86" height="42" rx="5" fill="#081a12" stroke="#34d399" stroke-width="1"/>
        <text x="55" y="189" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Door State</text>
        <text x="55" y="204" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#34d399" opacity="0.7">Detector</text>

        <rect x="168" y="164" width="116" height="54" rx="5" fill="#081a12" stroke="#34d399" stroke-width="1"/>
        <text x="226" y="182" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Behavioral</text>
        <text x="226" y="197" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Blocking</text>
        <text x="226" y="211" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#1a7a4a" font-style="italic">staff / tout</text>

        <rect x="334" y="166" width="100" height="48" rx="5" fill="#081a12" stroke="#34d399" stroke-width="1"/>
        <text x="384" y="184" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Geometric</text>
        <text x="384" y="199" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Crossing</text>
        <text x="384" y="211" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#1a7a4a" font-style="italic">line + poly</text>

        <rect x="480" y="172" width="86" height="42" rx="5" fill="#081a12" stroke="#34d399" stroke-width="1"/>
        <text x="523" y="189" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#34d399">Crossing</text>
        <text x="523" y="204" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#34d399" opacity="0.7">Grace</text>

        <rect x="620" y="116" width="82" height="42" rx="5" fill="#1a1a05" stroke="#fbbf24" stroke-width="1"/>
        <text x="661" y="134" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#fbbf24">Saviour</text>
        <text x="661" y="149" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10" fill="#fbbf24" opacity="0.7">Fallback</text>

        <!-- Ablation tags -->
        <rect x="41" y="218" width="28" height="17" rx="4" fill="#f8717120"/>
        <text x="55" y="230" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="700" fill="#f87171">A1</text>
        <rect x="212" y="150" width="28" height="17" rx="4" fill="#f8717120"/>
        <text x="226" y="162" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="700" fill="#f87171">A3</text>

        <!-- Blocked -->
        <text x="226" y="242" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" fill="#f87171">√ó</text>
        <text x="226" y="256" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#f87171" font-style="italic" opacity="0.7">blocked IDs</text>
        <line x1="226" y1="218" x2="226" y2="234" stroke="#f87171" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arr-red)"/>

        <!-- Row 2 arrows -->
        <line x1="424" y1="90" x2="424" y2="130" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="424" y1="130" x2="226" y2="130" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="226" y1="130" x2="226" y2="164" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="284" y1="191" x2="334" y2="191" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="434" y1="191" x2="480" y2="191" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="98" y1="193" x2="130" y2="193" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="130" y1="193" x2="130" y2="248" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="130" y1="248" x2="523" y2="248" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="523" y1="248" x2="523" y2="214" stroke="#5e7a9a" stroke-width="1" marker-end="url(#arr)"/>
        <line x1="44" y1="98" x2="44" y2="150" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="44" y1="150" x2="55" y2="150" stroke="#5e7a9a" stroke-width="1"/>
        <line x1="55" y1="150" x2="55" y2="172" stroke="#5e7a9a" stroke-width="1" marker-end="url(#arr)"/>
        <line x1="470" y1="68" x2="584" y2="68" stroke="#fbbf24" stroke-width="1" opacity="0.5"/>
        <line x1="584" y1="68" x2="584" y2="137" stroke="#fbbf24" stroke-width="1" opacity="0.5"/>
        <line x1="584" y1="137" x2="620" y2="137" stroke="#fbbf24" stroke-width="1" opacity="0.5" marker-end="url(#arr-olive)"/>

        <!-- ROW 3 ‚Äî Scoring & Output -->
        <rect x="168" y="296" width="268" height="68" rx="6" fill="#120a1e" stroke="#a78bfa" stroke-width="1.2"/>
        <rect x="168" y="296" width="268" height="3" rx="6" fill="url(#scoreGrad)"/>
        <text x="302" y="317" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11.5" font-weight="700" fill="#a78bfa">5-Signal Weighted Scorer</text>
        <text x="302" y="336" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="10.5" fill="#a0b4cc">
          S = w<tspan font-size="7.5" baseline-shift="sub">o</tspan>¬∑œÉ<tspan font-size="7.5" baseline-shift="sub">o</tspan>
          + w<tspan font-size="7.5" baseline-shift="sub">m</tspan>¬∑œÉ<tspan font-size="7.5" baseline-shift="sub">m</tspan>
          + w<tspan font-size="7.5" baseline-shift="sub">t</tspan>¬∑œÉ<tspan font-size="7.5" baseline-shift="sub">t</tspan>
          + w<tspan font-size="7.5" baseline-shift="sub">b</tspan>¬∑œÉ<tspan font-size="7.5" baseline-shift="sub">b</tspan>
          + w<tspan font-size="7.5" baseline-shift="sub">c</tspan>¬∑œÉ<tspan font-size="7.5" baseline-shift="sub">c</tspan>
        </text>
        <text x="302" y="356" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#5e7a9a" font-style="italic">chaos ‚Üê door_density</text>

        <rect x="484" y="302" width="92" height="50" rx="5" fill="#120a1e" stroke="#a78bfa" stroke-width="1.2"/>
        <text x="530" y="322" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#a78bfa">Deferred</text>
        <text x="530" y="338" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="600" fill="#a78bfa">Counter</text>
        <text x="530" y="350" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="9" fill="#5e7a9a" font-style="italic">A / B / C gates</text>

        <rect x="622" y="302" width="104" height="50" rx="6" fill="#0a1a0a" stroke="#fb923c" stroke-width="1.5"/>
        <text x="674" y="333" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="17" font-weight="700" fill="#fb923c">Œî<tspan font-size="12" baseline-shift="sub">in</tspan> , Œî<tspan font-size="12" baseline-shift="sub">out</tspan></text>

        <!-- Ablation tag -->
        <rect x="288" y="366" width="28" height="17" rx="4" fill="#f8717120"/>
        <text x="302" y="378" text-anchor="middle" font-family="JetBrains Mono, monospace" font-size="11" font-weight="700" fill="#f87171">A2</text>

        <!-- Row 3 arrows -->
        <line x1="523" y1="214" x2="523" y2="268" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="523" y1="268" x2="443" y2="268" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="443" y1="268" x2="443" y2="302" stroke="#5e7a9a" stroke-width="1.2"/>
        <line x1="443" y1="302" x2="436" y2="302" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="158" y1="92" x2="158" y2="322" stroke="#a78bfa" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.4"/>
        <line x1="158" y1="322" x2="168" y2="322" stroke="#a78bfa" stroke-width="0.8" opacity="0.4" marker-end="url(#arr)"/>
        <line x1="196" y1="124" x2="210" y2="124" stroke="#f472b6" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.4"/>
        <line x1="210" y1="124" x2="210" y2="342" stroke="#f472b6" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.4"/>
        <line x1="210" y1="342" x2="224" y2="342" stroke="#f472b6" stroke-width="0.8" opacity="0.4"/>
        <line x1="436" y1="328" x2="484" y2="328" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="576" y1="328" x2="622" y2="328" stroke="#5e7a9a" stroke-width="1.2" marker-end="url(#arr)"/>
        <line x1="661" y1="158" x2="661" y2="302" stroke="#fbbf24" stroke-width="1" opacity="0.5" marker-end="url(#arr-olive)"/>

        <!-- LEGEND -->
        <rect x="12" y="400" width="580" height="32" rx="5" fill="#111c2e" stroke="#1a2640" stroke-width="0.8"/>
        <text y="420" font-family="JetBrains Mono, monospace" font-size="13" letter-spacing="0.3">
          <tspan x="22" fill="#f87171" font-weight="700">A1</tspan><tspan fill="#a0b4cc"> door gating   </tspan>
          <tspan fill="#f87171" font-weight="700">A2</tspan><tspan fill="#a0b4cc"> crowd adapt   </tspan>
          <tspan fill="#f87171" font-weight="700">A3</tspan><tspan fill="#a0b4cc"> blocking   </tspan>
          <tspan fill="#f87171" font-weight="700">A4</tspan><tspan fill="#a0b4cc"> pose   </tspan>
          <tspan fill="#f87171" font-weight="700">A5</tspan><tspan fill="#a0b4cc"> ghost injection</tspan>
        </text>
      </svg>
    </div>
    <div class="scene-caption">
      <p><strong style="color: var(--text);">Figure 1: DOORFUSE pipeline.</strong> Frames pass through a triple-head detector (body / pose / head), ghost injection restores occluded tracks via Hungarian matching, and BoTSORT+ReID provides identity-consistent tracking. Behavioral blocking removes staff and touts before scoring. A 5-signal weighted scorer fuses orientation, motion, trajectory, biometric, and consistency signals with crowd-adaptive weight redistribution. Red labels <span style="color: var(--red);">A1‚ÄìA5</span> mark the five ablation toggle points.</p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê 05 ‚Äî RESULTS ‚ïê‚ïê‚ïê -->
  <div class="section-anchor" id="results"></div>
  <div class="section-break reveal">
    <h2 class="section-label" style="color: var(--green);">05 ‚Äî The Result</h2>
    <h3 class="section-headline">From <span style="color: var(--red);">unusable</span> to <span style="color: var(--green);">operational.</span></h3>
  </div>

  <div class="reveal">
    <div class="compare-grid">
      <div class="compare-side before">
        <div class="compare-tag" style="color: var(--red);">Baseline</div>
        <div class="compare-num" style="color: var(--red);">6.2</div>
        <div class="compare-unit">Mean Absolute Error</div>
        <div class="compare-detail">YOLOv12 + BoT-SORT<br>line-crossing counter</div>
        <div class="compare-arrow">‚Üí</div>
      </div>
      <div class="compare-side after">
        <div class="compare-tag" style="color: var(--green);">DOORFUSE</div>
        <div class="compare-num" style="color: var(--green);">1.1</div>
        <div class="compare-unit">Mean Absolute Error</div>
        <div class="compare-detail">Five-signal fusion<br>+ door-aware gating</div>
      </div>
    </div>
  </div>

  <p class="reveal" style="color: var(--text-dim); font-size: 1.05rem; text-align: center; max-width: 500px; margin: 0 auto 24px;">
    Tested on 4.2 hours of real bus footage across two cities, four bus types, and three camera modalities.
  </p>

  <div class="cities reveal">
    <div class="city">
      <div class="city-name">Nairobi</div>
      <div class="city-sub">Kenya ¬∑ Bidirectional Doors</div>
      <div class="city-row">
        <span class="city-row-label">Key challenge</span>
        <span class="city-row-val" style="color: var(--orange);">Staff/tout filtering</span>
      </div>
      <div class="city-row">
        <span class="city-row-label">Entry MAE</span>
        <span class="city-row-val"><span style="color:var(--red); text-decoration: line-through; opacity: 0.5;">15.0</span> ‚Üí <span style="color:var(--green);">2.7</span></span>
      </div>
      <div class="city-row">
        <span class="city-row-label">F1 Score</span>
        <span class="city-row-val" style="color: var(--green);">0.91</span>
      </div>
    </div>
    <div class="city">
      <div class="city-name">Kigali</div>
      <div class="city-sub">Rwanda ¬∑ Unidirectional Doors</div>
      <div class="city-row">
        <span class="city-row-label">Key challenge</span>
        <span class="city-row-val" style="color: var(--violet);">Cross-camera ReID</span>
      </div>
      <div class="city-row">
        <span class="city-row-label">Exit MAE</span>
        <span class="city-row-val"><span style="color:var(--red); text-decoration: line-through; opacity: 0.5;">3.2</span> ‚Üí <span style="color:var(--green);">0.6</span></span>
      </div>
      <div class="city-row">
        <span class="city-row-label">F1 Score</span>
        <span class="city-row-val" style="color: var(--green);">0.95</span>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê 06 ‚Äî FULL PAPER ‚ïê‚ïê‚ïê -->
<div class="section-anchor" id="paper"></div>
<div class="cta-section">
  <div class="cta-headline">Full ablation, parameters, and per-clip breakdowns<br>are in the paper.</div>
  <div class="cta-sub">
    How does each signal contribute? What happens when the camera switches from color to infrared mid-video? How do you filter a conductor who stands in the door for 15 seconds?
  </div>
  <a class="cta-btn" href="#">Full Paper ‚Üó</a>
  <div class="cta-details">
    <div class="cta-det">
      <div class="cta-det-val">24 clips</div>
      <div class="cta-det-label">Evaluated</div>
    </div>
    <div class="cta-det">
      <div class="cta-det-val">4 bus types</div>
      <div class="cta-det-label">Tested</div>
    </div>
    <div class="cta-det">
      <div class="cta-det-val">3 modalities</div>
      <div class="cta-det-label">Color ¬∑ B&W ¬∑ IR</div>
    </div>
    <div class="cta-det">
      <div class="cta-det-val">5 ablations</div>
      <div class="cta-det-label">Each component isolated</div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê NEXT PROJECT ‚ïê‚ïê‚ïê -->
<div class="next-project">
  <div class="next-project-label">Next Project</div>
  <a href="privacy.html" class="next-project-card">
    <h3>Privacy-by-Architecture for Passenger Counting in Growing Economies</h3>
    <p>Addressing the re-identification‚Äìanonymisation paradox: how do you track passengers accurately enough to count them without storing biometric data that violates Kenya's DPA 2019 and Rwanda's data protection laws?</p>
    <span class="next-project-tag">Privacy ¬∑ Regulation ¬∑ Computer Vision ‚Üí</span>
  </a>
</div>

<div class="footer">
  <p>DOORFUSE ‚Äî Door-Aware Multi-Signal Fusion for Stop-Level Bus Passenger Counting</p>
  <p style="margin-top: 4px;">Nairobi ¬∑ Kigali 2025</p>
</div>

<script>
function goToSection(id) {
  const element = document.getElementById(id);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

const navBtns = document.querySelectorAll('.stage-btn');
const anchors = document.querySelectorAll('.section-anchor');

const navObs = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      const id = e.target.id;
      navBtns.forEach(b => {
        const clickAttr = b.getAttribute('onclick') || "";
        if (clickAttr.includes('goToSection') && clickAttr.includes("'" + id + "'")) {
          b.classList.add('active');
        } else if (clickAttr.includes('goToSection')) {
          b.classList.remove('active');
        }
      });
    }
  });
}, {
  threshold: 0.1,
  rootMargin: '-80px 0px -50% 0px'
});

anchors.forEach(a => navObs.observe(a));
</script>
</body>
</html>
